{% extends 'base.html' %}
{% load custom_tags %}
{% load humanize %}

{% block content %}

<div>
    <form action="{% url 'posts' %}" class="inner p-4 row" method="GET">
        <div class="col-md-7 col-8 px-1">
            <input type="search" name="search" class="p-3 w-100 rounded-0 search-input" value="{% if request.GET.search %}{{ request.GET.search }}{% endif %}" placeholder="I'm looking for..." aria-label="Search" maxlength="100" id="search" onfocus="this.value=''">
            <ul id="search-results-list" class="list-group position-relative text-start"></ul>
        </div>
        <div class="col-md-3 px-1 d-none d-md-block">
            <input type="text" name="area" class="p-3 w-100 rounded-0 search-input" value="{% if request.GET.area %}{{ request.GET.area }}{% endif %}" placeholder="Where?" id="area" onfocus="this.value=''">
            <div id="area-results" class="w-100">
                <ul id="area-results-list" class="list-group text-start"></ul>
                <ul id="area-init-results-list" class="list-group text-start">
                    <li class="list-group-item">
                        <strong> Cała Polska </strong>
                    </li>
                    <li class="list-group-item">
                        Dolnośląskie
                    </li>
                    <li class="list-group-item">
                        Kujawsko-pomorskie
                    </li>
                    <li class="list-group-item">
                        Lubelskie
                    </li>
                    <li class="list-group-item">
                        Lubuskie
                    </li>
                    <li class="list-group-item">
                        Łódzkie
                    </li>
                    <li class="list-group-item">
                        Małopolskie
                    </li>
                    <li class="list-group-item">
                        Mazowieckie
                    </li>
                    <li class="list-group-item">
                        Opolskie
                    </li>
                    <li class="list-group-item">
                        Podkarpackie
                    </li>
                    <li class="list-group-item">
                        Podlaskie
                    </li>
                    <li class="list-group-item">
                        Pomorskie
                    </li>
                    <li class="list-group-item">
                        Śląskie
                    </li>
                    <li class="list-group-item">
                        Świętokrzyskie
                    </li>
                    <li class="list-group-item">
                        Warmińsko-mazurskie
                    </li>
                    <li class="list-group-item">
                        Wielkopolskie
                    </li>
                    <li class="list-group-item">
                        Zachodniopomorskie
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-2 col-4 px-1 mx-auto">
            <input class="button rounded-0 w-100 p-3" type="submit" value="Search">
        </div>
    </form>
    <div class="category-page text-center mb-4 p-4">
        <div class="inner">
            <div class="category-page-title">What are you looking for?</div>
            <div class="category-page-content row m-0 g-3">
                {% comment %} row-cols-md-5 row-cols-sm-2 row-cols-1 {% endcomment %}
                {% for c in categories %}
                <div class="col">
                    <span>{{ c.icon }}</span>
                    <span><a href="/posts/{{ c|lower }}"> {{ c }}</a></span>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="page">
        <div class="inner">
            how are we?
            <div class="text-center">
                <div class="post-col example p-3 text-start rounded">
                    <img src="/media/example-post-img.jpg">
                    <p class="py-1 post-col-title mb-1"><a>2 free rooms in Wola</a></p> <br>
                    <div class="row justify-content-between py-2 m-0 p-3 w-100" style="position: absolute; bottom: 0; left: 0">
                        <div class="col-6 p-0">
                            <p class="post-col-foot text-start mb-0"> Warszawa, Mazowieckie </p>
                        </div>
                        <div class="col-6 p-0">
                            <p class="post-col-foot text-end mb-0"> yesterday at 10:27  </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="inner">
        <div class="text-center posts-title p-4 my-1">
            <span><a href="/posts/?type=need">People need help with...</a></span>
        </div>
        <div class="post-page-posts row row-cols-md-4 row-cols-sm-2 row-cols-1 g-3">
            {% for p in look_for_help_posts %}
            <div class="col text-center">
                {% if p.visible %}
                {% if p.image %}
                <div class="post-col text-start rounded">
                    <div>
                        <img class='w-100' src="{{ '/media/'|addstr:p.image }}">
                    </div>
                    <div class="p-2 post-col-grid">
                        <div class="post-col-title"><a href="{% url 'post-details' p.id %}">{{ p.title }}</a></div>
                        <div class="row justify-content-between w-100 m-0 mt-auto">
                            <div class="col-6 p-0">
                                <div class="post-col-foot text-start"> {{ p.area }} </div>
                            </div>
                            <div class="col-6 p-0">
                                <div class="post-col-foot text-end"> {{ p.date_created|time_since }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="post-col text-start rounded">
                    <div class="p-2 post-col-grid">
                        <div class="post-col-title"><a href="{% url 'post-details' p.id %}">{{ p.title }}</a></div>
                        <div class="post-col-info text-break pb-3">{{ p.text|truncatechars:150 }}</div>
                        <div class="row justify-content-between w-100 m-0 mt-auto">
                            <div class="col-6 p-0">
                                <div class="post-col-foot text-start mb-0"> {{ p.area }} </div>
                            </div>
                            <div class="col-6 p-0">
                                <div class="post-col-foot text-end mb-0"> {{ p.date_created|time_since }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endif %}
            </div>
            {% endfor %}
        </div>
        <div class="text-center posts-title p-4 mt-4 mb-1">
            <span><a href="/posts/?type=offer">...while others can offer</a></span>
        </div>
        <div class="row row-cols-md-4 row-cols-sm-2 row-cols-1 g-3">
            {% for p in offer_help_posts %}
            <div class="col text-center">
                {% if p.visible %}
                {% if p.image %}
                <div class="post-col text-start rounded">
                    <div>
                        <img class='w-100' src="{{ '/media/'|addstr:p.image }}">
                    </div>
                    <div class="p-2 post-col-grid">
                        <div class="post-col-title"><a href="{% url 'post-details' p.id %}">{{ p.title }}</a></div>
                        <div class="row justify-content-between w-100 m-0 mt-auto">
                            <div class="col-6 p-0">
                                <div class="post-col-foot text-start"> {{ p.area }} </div>
                            </div>
                            <div class="col-6 p-0">
                                <div class="post-col-foot text-end"> {{ p.date_created|time_since }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="post-col text-start rounded">
                    <div class="p-2 post-col-grid">
                        <div class="post-col-title"><a href="{% url 'post-details' p.id %}">{{ p.title }}</a></div>
                        <div class="post-col-info text-break pb-3">{{ p.text|truncatechars:150 }}</div>
                        <div class="row justify-content-between w-100 m-0 mt-auto">
                            <div class="col-6 p-0">
                                <div class="post-col-foot text-start mb-0"> {{ p.area }} </div>
                            </div>
                            <div class="col-6 p-0">
                                <div class="post-col-foot text-end mb-0"> {{ p.date_created|time_since }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="mt-5 support-page">
        <div class="inner">
            <div>
                asdf
            </div>
        </div>
    </div>
</div>



{% endblock %}